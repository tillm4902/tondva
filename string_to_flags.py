country_flags = {"AC":"Ascension Island", "AD":"Andorra",
                 "AE":"United Arab Emirates", "AF":"Afghanistan",
                 "AG":"Antigua & Barbuda", "AI":"Anguilla", "AL":"Albania",
                 "AM":"Armenia", "AO":"Angola", "AQ":"Antarctica",
                 "AR":"Argentina", "AS":"American Samoa", "AT":"Austria",
                 "AU":"Australia", "AW":"Aruba", "AX":"Åland Islands",
                 "AZ":"Azerbaijan", "BA":"Bosnia & Herzegovina", "BB":"Barbados",
                 "BD":"Bangladesh", "BE":"Belgium", "BF":"Burkina Faso",
                 "BH":"Bahrain", "BI":"Burundi", "BJ":"Benin",
                 "BL":"St. Barthélemy", "BM":"Bermuda", "BN":"Brunei",
                 "BO":"Bolivia", "BQ":"Caribbean Netherlands", "BR":"Brazil",
                 "BS":"Bahamas", "BT":"Bhutan", "BV":"Bouvet Island",
                 "BW":"Botswana", "BY":"Belarus", "BZ":"Belize", "CA":"Canada",
                 "CC":"Cocos (Keeling) Islands", "CD":"Congo - Kinshasa",
                 "CF":"Central African Republic", "CG":"Congo - Brazzaville",
                 "CH":"Switzerland", "CI":"Côte d’Ivoire", "CK":"Cook Islands",
                 "CL":"Chile", "CM":"Cameroon", "CN":"China", "CO":"Columbia",
                 "CP":"Clipperton Island", "CR":"Costa Rica", "CU":"Cuba",
                 "CV":"Cape Verde", "CW":"Curaçao", "CX":"Christman Islands",
                 "CY":"Cyprus", "CZ":"Czechia", "DE":"Germany",
                 "DG":"Diego Garcia", "DJ":"Djibouti", "DK":"Denmark",
                 "DM":"Dominica", "DO":"Domican Republic", "DZ":"Algeria",
                 "EA":"Ceutra & Melilla", "EC":"Ecuador", "EE":"Estonia",
                 "EG":"Egypt", "EH":"Western Sahara", "ER":"Eritrea",
                 "ES":"Spain", "ET":"Ethiopia", "EU":"European Union",
                 "FI":"Finland", "FJ":"Fiji", "FK":"Falkland Islands",
                 "FM":"Micronesia", "FO":"Faroe Islands", "FR":"France",
                 "GA":"Gabon", "GB":"United Kingdom", "GD":"Grenada",
                 "GE":"Georgia", "GF":"French Guiana", "GG":"Guernsey",
                 "GH":"Ghana", "GI":"Gibraltar", "GL":"Greenland", "GM":"Gambia",
                 "GN":"Guinea", "GP":"Guadeloupe", "GQ":"Equatorial Guinea",
                 "GR":"Greece", "GS":"South Georgia & South Sandwich Islands",
                 "GT":"Guatemala", "GU":"Guam", "GW":"Guinea - Bissau",
                 "GY":"Guyana", "HK":"Hong Kong SAR China",
                 "HM":"Heart & McDonald Islands", "HN":"Honduras", "HR":"Croatia",
                 "HT":"Haiti", "HU":"Hungary", "IC":"Canary Islands",
                 "ID":"Indonesia", "IE":"Ireland", "IM":"Isle of Man",
                 "IN":"India", "IO":"British Indian Ocean Territory", "IQ":"Iraq",
                 "IR":"Iran", "IS":"Iceland", "IT":"Italy", "JE":"Jersey",
                 "JM":"Jamaica", "JO":"Jordan", "JP":"Japan", "KE":"Kenya",
                 "KG":"Kyrgyzstan", "KH":"Cambodia", "KI":"Kiribati",
                 "KM":"Comoros", "KN":"St. Kitts & Nevis", "KP":"North Korea",
                 "KR":"South Korea", "KW":"Kuwait", "KY":"Cayman Islands",
                 "KZ":"Kazakhstan", "LA":"Laos", "LB":"Lebanon", "LC":"St. Lucia",
                 "LI":"Liechtenstein", "LK":"Sri Lanka", "LS":"Lesotho",
                 "LT":"Lithuania", "LU":"Luxembourg", "LV":"Latvia", "LY":"Libya",
                 "MA":"Morocca", "MC":"Monaco", "MD":"Moldova", "ME":"Montenegro",
                 "MF":"St. Martin", "MG":"Madagascar", "MH":"Marshall Islands",
                 "MK":"Macedonia", "ML":"Mali", "MM":"Myanmar (Burma)",
                 "MN":"Mongolia", "MO":"Macau SAR China",
                 "MP":"Northern Mariana Islands", "MQ":"Martinique",
                 "MR":"Mauritania", "MS":"Montserrat", "MT":"Malta",
                 "MU":"Mauritius", "MV":"Maldives", "MW":"Malawi", "MX":"Mexico",
                 "MY":"Malaysia", "MZ":"Mozambique", "NA":"Namibia",
                 "NC":"New Caledonia", "NE":"Niger", "NF":"Norfolk Island",
                 "NG":"Nigeria", "NI":"Nicaragua", "NO":"Norway", "NP":"Nepal",
                 "NR":"Nauru", "NU":"Niue", "NZ":"New Zealand", "OM":"Oman",
                 "PA":"Panama", "PE":"Peru", "PF":"French Polynesia",
                 "PG":"Papua New Guinea", "PH":"Philippines", "PK":"Pakistan",
                 "PL":"Poland", "PM":"St. Pierre & Miquelon",
                 "PN":"Pitcairn Islands", "PR":"Puerto Rico",
                 "PS":"Palestinian Territories", "PT":"Portugal", "PW":"Palau",
                 "PY":"Paraguay", "QA":"Qatar", "RE":"Réunion", "RO":"Romania",
                 "RS":"Serbia", "RU":"Russia", "RW":"Rwanda", "SA":"Saudi Arabia",
                 "SB":"Soloman Islands", "SC":"Seychelles", "SD":"Sudan",
                 "SE":"Sweden", "SG":"Singapore", "SH":"St. Helena",
                 "SI":"Slovenia", "SJ":"Svalbard & Jan Mayen", "SK":"Slovakia",
                 "SL":"Sierra Leone", "SM":"San Marino", "SN":"Senegal",
                 "SO":"Somalia", "SR":"Suriname", "SS":"South Sudan",
                 "ST":"São Tomé & Príncipe", "SV":"El Salvador",
                 "SX":"Sint Maarten", "SY":"Syria", "SZ":"Swaziland",
                 "TA":"Tristan da Cuhna", "TC":"Turks & Caicos Islands",
                 "TD":"Chad", "TF":"French Southern Territories", "TG":"Togo",
                 "TH":"Thailand", "TJ":"Tajikistan", "TK":"Tokelau",
                 "TL":"Timor-Leste", "TM":"Turkmenistan", "TN":"Tunisia",
                 "TO":"Tonga", "TR":"Turkey", "TT":"Trinidad & Tobago",
                 "TV":"Tuvula", "TW":"Taiwan", "TZ":"Tanzania", "UA":"Ukraine",
                 "UG":"Uganda", "UM":"U.S. Outlying Islands",
                 "UN":"United Nations", "US":"United States", "UY":"Uraguay",
                 "UZ":"Uzbekistan", "VA":"Vatican City",
                 "VC":"St. Vinvent & Grenadines", "VE":"Venezuela",
                 "VG":"British Virgin Islands", "VI":"U.S. Virgin Islands",
                 "VN":"Vietnam", "VU":"Vanuatu", "WF":"Wallis & Futuna",
                 "SA":"Samoa", "XK":"Kosovo", "YE":"Yemen", "YT":"Mayotte",
                 "ZA":"South Africa", "ZM":"Zambia", "ZW":"Zimbabwe"}

def string_to_flags(phrase):
    """
    given a phrase, returns a list of country flags whose
    regional_country_indexes spell out the phrase. Returns [] if not possible.

    >>> string_to_flags("yeet")
    ["Yemen", "Ethiopia"]

    >>> string_to_flags("hello world")
    []
    """
    ans = []

    phrase = phrase.replace(" ","")

    if len(phrase)%2 != 0:
        return []

    for x in range(0, len(phrase), 2):
        test = (phrase[x:x+2]).upper()
        if test in country_flags:
            ans.append(country_flags[test])
        else:
            return []

    return ans

def attempt_spelling(phrase):
    """
    given a phrase, if it can be spelled using flags, returns string_to_flags(phrase)
    else, returns longest possible segment that can be spelled.
    """

    longest = []
    if string_to_flags(phrase):
        return string_to_flags(phrase)
    else:
        for x in range(len(phrase)):
            for y in range(len(phrase)-x):
                if len(string_to_flags(phrase[x:y])) > len(longest):
                    longest = string_to_flags(phrase[x:y])

    return longest

def shitpost_string(countries):
    """
    given a list of countries, returns a shitpostable string to spell a phrase
    """
    ans = ""
    for country in countries:
        for (id, name) in country_flags.items():
            if name == country:
                ans += (R"\:flag_" + id.lower() + ":")

    return ans

def spell_full(phrase):
    """
    given a phrase, spells as much of it as possible using flags, otherwise, uses regional indicators.
    """
    ans = ''
    while len(phrase):
        longest_cont = ""
        for x in range(len(phrase), 2):
            if len(string_to_flags(phrase[:x])) > len(longest_cont):
                longest_cont = string_to_flags[:x]
            elif string_to_flags(phrase[:x]) == '':
                ans += string_to_flags(longest_cont)
                ans += (R"\:regional_indicator_"+phrase[x-2])
                ans += (R"\:regional_indicator_"+phrase[x-1])
                longest_cont = ''
                phrase = phrase[x+1:]
                break
    return ans
